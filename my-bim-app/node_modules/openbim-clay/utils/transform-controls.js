import * as THREE from "three";
import * as OBC from "openbim-components";
import { TransformControls } from "three/examples/jsm/controls/TransformControls";
export class Control {
    constructor(camera, element) {
        this.transformed = new OBC.Event();
        this.controlsActivated = new OBC.Event();
        this.core = new TransformControls(camera, element);
        this.helper = new THREE.Object3D();
        let transform = new THREE.Matrix4();
        this.core.attach(this.helper);
        this.core.addEventListener("dragging-changed", () => {
            this.controlsActivated.trigger();
        });
        this.core.addEventListener("change", () => {
            this.helper.updateMatrix();
            const temp = this.helper.matrix.clone();
            temp.multiply(transform.invert());
            this.transformed.trigger(temp);
            transform = this.helper.matrix.clone();
        });
    }
    get items() {
        return [this.helper, this.core];
    }
}
//# sourceMappingURL=transform-controls.js.map